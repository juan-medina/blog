<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Reactive Kotlin vs Java | Juan Medina Personal Blog</title>
  <meta name="author" content="Juan Medina">
  <meta name="description" content="Personal blog from Juan Medina">
  <meta property="og:title" content="Reactive Kotlin vs Java | Juan Medina Personal Blog">
  <meta property="og:url" content="http://juan-medina.com/2017/06/04/reactive-kotlin-vs-java/">
  <meta property="og:site_name" content="Juan Medina Personal Blog">
  <meta property="og:description" content="Personal blog from Juan Medina">
  <meta property="og:image" content="http://juan-medina.com/assets/img/reactor.jpg">
  <meta property="og:type" content="blog">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:description" content="Personal blog from Juan Medina">
  <meta name="twitter:title" content="Reactive Kotlin vs Java | Juan Medina Personal Blog">
  <meta name="twitter:url" content="http://juan-medina.com/2017/06/04/reactive-kotlin-vs-java/">
  <meta name="twitter:site" content="Juan Medina Personal Blog">
  <meta name="twitter:creator" content="@JuanMedinaCode">
  <meta name="twitter:domain" content="http://juan-medina.com">
  <meta property="twitter:image" content="http://juan-medina.com/assets/img/reactor.jpg">

  <!-- ****** faviconit.com favicons ****** -->
  <link rel="shortcut icon" href="/favicon/favicon.ico">
  <link rel="icon" sizes="16x16 32x32 64x64" href="/favicon/favicon.ico">
  <link rel="icon" type="image/png" sizes="196x196" href="/favicon/favicon-192.png">
  <link rel="icon" type="image/png" sizes="160x160" href="/favicon/favicon-160.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96.png">
  <link rel="icon" type="image/png" sizes="64x64" href="/favicon/favicon-64.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16.png">
  <link rel="apple-touch-icon" href="/favicon/favicon-57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/favicon/favicon-114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/favicon/favicon-72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/favicon/favicon-144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/favicon/favicon-60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/favicon/favicon-120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/favicon/favicon-76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/favicon/favicon-152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/favicon-180.png">
  
  <meta name="msapplication-TileColor" content="#FFFFFF">
  <meta name="msapplication-TileImage" content="/favicon-144.png">
  <meta name="msapplication-config" content="/browserconfig.xml">
  <!-- ****** faviconit.com favicons ****** -->

  <link type="application/atom+xml" rel="alternate" href="http://juan-medina.com/feed.xml" title="Juan Medina Personal Blog" />

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Lora|Space+Mono:700">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/syntax.css">

  <link rel="alternate" type="application/rss+xml" title="Juan Medina Personal Blog" href="http://juan-medina.com/feed.xml">
  <link rel="canonical" href="http://juan-medina.com/2017/06/04/reactive-kotlin-vs-java/">

  
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-71726617-1', 'auto');
      ga('send', 'pageview');
    </script>
  
</head>


  <body>

    <main>
      <article itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="section-padding--lg mast rellax" data-rellax-speed="-4">
    <a class="nav nav--white" href="/">
      <i class="fa fa-lg fa-arrow-left"></i>
      <span>Back to Posts</span>
    </a>
    <figure class="absolute-bg mast__img" style="background-image: url('/assets/img/reactor.jpg');"></figure>
    <div class="mast__container">
      <span><time datetime="2017-06-04T09:00:00+01:00" itemprop="datePublished">Jun 4, 2017</time></span>
      <h1 itemprop="name headline">Reactive Kotlin vs Java</h1>
      
        <span>Posted in
          
            <a class="nav--white" href="/category/programming">Programming</a>
          
        </span>
      
      <span></span>
    </div>
  </header>

  <section class="section-padding bg-grey" itemprop="articleBody">
    <div class="post">
      <p>For me the best way to <a href="https://github.com/LearningByExample" target="_blank">learn something is by example</a>, so instead to create <a href="https://en.wikipedia.org/wiki/%22Hello,_World!%22_program" target="_blank">HelloWords</a> I’ve been translating my <a href="https://github.com/LearningByExample/reactive-ms-example" target="_blank">Java Reactive Spring 5 Webflux example</a> into <a href="https://github.com/LearningByExample/KotlinReactiveMS" target="_blank">Kotlin</a>, and now that is done is time to analyze the results.</p>

<p><em>I’m not going to talk about performance here, I’ve done JMeter load tests on both services and they virtual identical, response times are just decimals apart. However sometimes Kotlin seams to perform better, I’ll not get into conclusions until I research more.</em></p>

<p>First lest look at how many life of code we have create for each project:</p>

<table>
  <thead>
    <tr>
      <th>Lines of Code</th>
      <th style="text-align: right">Src</th>
      <th style="text-align: right">Test</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Java</td>
      <td style="text-align: right">1004</td>
      <td style="text-align: right">1172</td>
    </tr>
    <tr>
      <td>Kotlin</td>
      <td style="text-align: right">721</td>
      <td style="text-align: right">1017</td>
    </tr>
  </tbody>
</table>

<p><br />This is a expected result since Kotlin syntax will be always shorten and easer to understand.</p>

<p>Now when we look at the maxim complexity reported by <a href="https://codebeat.co" target="_blank">https://codebeat.co</a></p>

<table>
  <thead>
    <tr>
      <th>Complexity</th>
      <th style="text-align: right">Max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Java</td>
      <td style="text-align: right">45</td>
    </tr>
    <tr>
      <td>Kotlin</td>
      <td style="text-align: right">8</td>
    </tr>
  </tbody>
</table>

<p><br />I think we need to do a deep down on this.</p>

<p><em>I’ve need to modify some line breaks in order to fit the web, please check the repos</em></p>

<p>Let’s look at one of the methods in the <a href="https://github.com/LearningByExample/reactive-ms-example/blob/master/src/main/java/org/learning/by/example/reactive/microservices/services/GeoLocationServiceImpl.java" target="_blank">more complex class in Java</a>:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="nc">Mono</span><span class="o">&lt;</span><span class="nc">SunriseSunset</span><span class="o">&gt;</span> <span class="nf">createResult</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Mono</span><span class="o">&lt;</span><span class="nc">GeoTimesResponse</span><span class="o">&gt;</span> <span class="n">geoTimesResponseMono</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">geoTimesResponseMono</span><span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">geoTimesResponse</span> <span class="o">-&gt;</span> <span class="o">{</span>
          <span class="k">if</span> <span class="o">((</span><span class="n">geoTimesResponse</span><span class="o">.</span><span class="na">getStatus</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">geoTimesResponse</span><span class="o">.</span><span class="na">getStatus</span><span class="o">()</span>
              <span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="no">STATUS_OK</span><span class="o">)))</span> <span class="o">{</span>
              <span class="k">return</span> <span class="nc">Mono</span><span class="o">.</span><span class="na">just</span><span class="o">(</span><span class="k">new</span> <span class="nc">SunriseSunset</span><span class="o">(</span><span class="n">geoTimesResponse</span><span class="o">.</span><span class="na">getResults</span><span class="o">().</span><span class="na">getSunrise</span><span class="o">(),</span>
                      <span class="n">geoTimesResponse</span><span class="o">.</span><span class="na">getResults</span><span class="o">().</span><span class="na">getSunset</span><span class="o">()));</span>
          <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
              <span class="k">return</span> <span class="nc">Mono</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="k">new</span> <span class="nc">GetSunriseSunsetException</span><span class="o">(</span><span class="no">SUNRISE_RESULT_NOT_OK</span><span class="o">));</span>
          <span class="o">}</span>
      <span class="o">});</span>
  <span class="o">}</span></code></pre></figure>

<p>And the equivalent method for the same <a href="https://github.com/LearningByExample/KotlinReactiveMS/blob/master/src/main/kotlin/org/learning/by/example/reactive/kotlin/microservices/KotlinReactiveMS/services/SunriseSunsetServiceImpl.kt" target="_blank">class in Kotlin</a>:</p>

<figure class="highlight"><pre><code class="language-kotlin" data-lang="kotlin">  <span class="k">open</span> <span class="k">internal</span> <span class="k">fun</span> <span class="nf">createResult</span><span class="p">(</span><span class="n">geoTimesResponseMono</span><span class="p">:</span> <span class="nc">Mono</span><span class="p">&lt;</span><span class="nc">GeoTimesResponse</span><span class="p">&gt;)</span> <span class="p">=</span>
    <span class="n">geoTimesResponseMono</span><span class="p">.</span><span class="nf">flatMap</span> <span class="p">{</span>
        <span class="nf">with</span><span class="p">(</span><span class="n">it</span><span class="p">){</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">status</span> <span class="p">==</span> <span class="nc">STATUS_OK</span><span class="p">)</span> <span class="nf">with</span><span class="p">(</span><span class="n">results</span><span class="p">)</span> <span class="p">{</span> <span class="nc">SunriseSunset</span><span class="p">(</span><span class="n">sunrise</span><span class="p">,</span> <span class="n">sunset</span><span class="p">).</span><span class="nf">toMono</span><span class="p">()</span> <span class="p">}</span>
            <span class="k">else</span> <span class="nc">GetSunriseSunsetException</span><span class="p">(</span><span class="nc">SUNRISE_RESULT_NOT_OK</span><span class="p">).</span><span class="nf">toMono</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span></code></pre></figure>

<p>Many times this is because of the <a href="https://github.com/LearningByExample/KotlinReactiveMS/blob/master/src/main/kotlin/org/learning/by/example/reactive/kotlin/microservices/KotlinReactiveMS/extensions/UtilExtensions.kt" target="_blank">extensions</a> system that allow to write really tide code.</p>

<p>Let’s look at one of the methods in <a href="https://github.com/LearningByExample/reactive-ms-example/blob/master/src/main/java/org/learning/by/example/reactive/microservices/handlers/ApiHandler.java" target="_blank">one of the handler class</a>:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="nc">Mono</span><span class="o">&lt;</span><span class="nc">ServerResponse</span><span class="o">&gt;</span> <span class="nf">serverResponse</span><span class="o">(</span><span class="nc">Mono</span><span class="o">&lt;</span><span class="nc">LocationResponse</span><span class="o">&gt;</span> <span class="n">locationResponseMono</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">locationResponseMono</span><span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">locationResponse</span> <span class="o">-&gt;</span>
              <span class="nc">ServerResponse</span><span class="o">.</span><span class="na">ok</span><span class="o">().</span><span class="na">body</span><span class="o">(</span><span class="nc">Mono</span><span class="o">.</span><span class="na">just</span><span class="o">(</span><span class="n">locationResponse</span><span class="o">),</span> <span class="nc">LocationResponse</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
  <span class="o">}</span></code></pre></figure>

<p>And the equivalent method for the same <a href="https://github.com/LearningByExample/KotlinReactiveMS/blob/master/src/main/kotlin/org/learning/by/example/reactive/kotlin/microservices/KotlinReactiveMS/handlers/ApiHandler.kt" target="_blank">class in Kotlin</a>:</p>

<figure class="highlight"><pre><code class="language-kotlin" data-lang="kotlin">  <span class="k">fun</span> <span class="nf">serverResponse</span><span class="p">(</span><span class="n">locationResponseMono</span><span class="p">:</span> <span class="nc">Mono</span><span class="p">&lt;</span><span class="nc">LocationResponse</span><span class="p">&gt;):</span> <span class="nc">Mono</span><span class="p">&lt;</span><span class="nc">ServerResponse</span><span class="p">&gt;</span> <span class="p">=</span>
    <span class="n">locationResponseMono</span><span class="p">.</span><span class="nf">flatMap</span> <span class="p">{</span> <span class="nf">ok</span><span class="p">()</span> <span class="n">withBody</span> <span class="n">it</span> <span class="p">}</span></code></pre></figure>

<p>In fact spring framework has create <a href="https://spring.io/blog/2017/01/04/introducing-kotlin-support-in-spring-framework-5-0" target="_blank">custom extensions for Kotlin</a>.</p>

<p>Let’s look at our <a href="https://github.com/LearningByExample/reactive-ms-example/blob/master/src/main/java/org/learning/by/example/reactive/microservices/routers/ApiRouter.java" target="_blank">api router function class</a>:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="kd">static</span> <span class="nc">RouterFunction</span><span class="o">&lt;?&gt;</span> <span class="n">doRoute</span><span class="o">(</span><span class="kd">final</span> <span class="nc">ApiHandler</span> <span class="n">apiHandler</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">ErrorHandler</span> <span class="n">errorHandler</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span>
              <span class="nf">nest</span><span class="o">(</span><span class="n">path</span><span class="o">(</span><span class="no">API_PATH</span><span class="o">),</span>
                  <span class="n">nest</span><span class="o">(</span><span class="n">accept</span><span class="o">(</span><span class="no">APPLICATION_JSON_UTF8</span><span class="o">),</span>
                      <span class="n">route</span><span class="o">(</span><span class="no">GET</span><span class="o">(</span><span class="no">LOCATION_WITH_ADDRESS_PATH</span><span class="o">),</span> <span class="nl">apiHandler:</span><span class="o">:</span><span class="n">getLocation</span><span class="o">)</span>
                      <span class="o">.</span><span class="na">andRoute</span><span class="o">(</span><span class="no">POST</span><span class="o">(</span><span class="no">LOCATION_PATH</span><span class="o">),</span> <span class="nl">apiHandler:</span><span class="o">:</span><span class="n">postLocation</span><span class="o">)</span>
                  <span class="o">).</span><span class="na">andOther</span><span class="o">(</span><span class="n">route</span><span class="o">(</span><span class="nc">RequestPredicates</span><span class="o">.</span><span class="na">all</span><span class="o">(),</span> <span class="nl">errorHandler:</span><span class="o">:</span><span class="n">notFound</span><span class="o">))</span>
              <span class="o">);</span>
  <span class="o">}</span></code></pre></figure>

<p>And the equivalent <a href="https://github.com/LearningByExample/KotlinReactiveMS/blob/master/src/main/kotlin/org/learning/by/example/reactive/kotlin/microservices/KotlinReactiveMS/routers/ApiRouter.kt" target="_blank">class in Kotlin</a>:</p>

<figure class="highlight"><pre><code class="language-kotlin" data-lang="kotlin">  <span class="k">fun</span> <span class="nf">doRoute</span><span class="p">()</span> <span class="p">=</span> <span class="nf">router</span> <span class="p">{</span>
      <span class="p">(</span><span class="nf">accept</span><span class="p">(</span><span class="nc">APPLICATION_JSON_UTF8</span><span class="p">)</span> <span class="n">and</span> <span class="nc">API_PATH</span><span class="p">).</span><span class="nf">nest</span> <span class="p">{</span>
          <span class="nc">GET</span><span class="p">(</span><span class="nc">LOCATION_WITH_ADDRESS_PATH</span><span class="p">)(</span><span class="n">handler</span><span class="o">::</span><span class="n">getLocation</span><span class="p">)</span>
          <span class="nc">POST</span><span class="p">(</span><span class="nc">LOCATION_PATH</span><span class="p">)(</span><span class="n">handler</span><span class="o">::</span><span class="n">postLocation</span><span class="p">)</span>
          <span class="nf">path</span><span class="p">(</span><span class="nc">ANY_PATH</span><span class="p">)(</span><span class="n">errorHandler</span><span class="o">::</span><span class="n">notFound</span><span class="p">)</span>
      <span class="p">}</span>
  <span class="p">}</span></code></pre></figure>

<p>Definitely Kotlin is more simpler and readable, but this is not only the main code lest check the test for our tests.</p>

<p>Testing our ThrowableTranslator in <a href="https://github.com/LearningByExample/reactive-ms-example/blob/master/src/test/java/org/learning/by/example/reactive/microservices/handlers/ThrowableTranslatorTest.java" target="_blank">Java</a></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">translatePathNotFoundExceptionTest</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="nc">PathNotFoundException</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">translateTo</span><span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">NOT_FOUND</span><span class="o">));</span>
  <span class="o">}</span></code></pre></figure>

<p>And the same test in <a href="https://github.com/LearningByExample/KotlinReactiveMS/blob/master/src/test/kotlin/org/learning/by/example/reactive/kotlin/microservices/KotlinReactiveMS/handlers/ThrowableTranslatorTest.kt" target="_blank">Kotlin</a></p>

<figure class="highlight"><pre><code class="language-kotlin" data-lang="kotlin">  <span class="nd">@Test</span>
  <span class="k">fun</span> <span class="nf">translatePathNotFoundExceptionTest</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">PathNotFoundException</span><span class="o">::</span><span class="kd">class</span> <span class="err">`translates to` </span><span class="nc">HttpStatus</span><span class="p">.</span><span class="nc">NOT_FOUND</span>
  <span class="p">}</span></code></pre></figure>

<p>But lets use a more complex test that includes mocking.</p>

<p>Testing one of the services error in <a href="https://github.com/LearningByExample/reactive-ms-example/blob/master/src/test/java/org/learning/by/example/reactive/microservices/handlers/ApiHandlerTests.java" target="_blank">Java</a></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">getLocationNotFoundTest</span><span class="o">()</span> <span class="o">{</span>
      <span class="nc">ServerRequest</span> <span class="n">serverRequest</span> <span class="o">=</span> <span class="n">mock</span><span class="o">(</span><span class="nc">ServerRequest</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
      <span class="n">when</span><span class="o">(</span><span class="n">serverRequest</span><span class="o">.</span><span class="na">pathVariable</span><span class="o">(</span><span class="no">ADDRESS_VARIABLE</span><span class="o">)).</span><span class="na">thenReturn</span><span class="o">(</span><span class="no">GOOGLE_ADDRESS</span><span class="o">);</span>
      <span class="n">doReturn</span><span class="o">(</span><span class="no">LOCATION_NOT_FOUND</span><span class="o">).</span><span class="na">when</span><span class="o">(</span><span class="n">geoLocationService</span><span class="o">).</span><span class="na">fromAddress</span><span class="o">(</span><span class="n">any</span><span class="o">());</span>
      <span class="n">doReturn</span><span class="o">(</span><span class="no">SUNRISE_SUNSET</span><span class="o">).</span><span class="na">when</span><span class="o">(</span><span class="n">sunriseSunsetService</span><span class="o">).</span><span class="na">fromGeographicCoordinates</span><span class="o">(</span><span class="n">any</span><span class="o">());</span>

      <span class="nc">ServerResponse</span> <span class="n">serverResponse</span> <span class="o">=</span> <span class="n">apiHandler</span><span class="o">.</span><span class="na">getLocation</span><span class="o">(</span><span class="n">serverRequest</span><span class="o">).</span><span class="na">block</span><span class="o">();</span>
      <span class="n">assertThat</span><span class="o">(</span><span class="n">serverResponse</span><span class="o">.</span><span class="na">statusCode</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">NOT_FOUND</span><span class="o">));</span>
      <span class="nc">ErrorResponse</span> <span class="n">error</span> <span class="o">=</span> <span class="nc">HandlersHelper</span><span class="o">.</span><span class="na">extractEntity</span><span class="o">(</span><span class="n">serverResponse</span><span class="o">,</span> <span class="nc">ErrorResponse</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
      <span class="n">assertThat</span><span class="o">(</span><span class="n">error</span><span class="o">.</span><span class="na">getError</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="no">NOT_FOUND</span><span class="o">));</span>

      <span class="n">reset</span><span class="o">(</span><span class="n">geoLocationService</span><span class="o">);</span>
      <span class="n">reset</span><span class="o">(</span><span class="n">sunriseSunsetService</span><span class="o">);</span>
  <span class="o">}</span></code></pre></figure>

<p>And the same test in <a href="https://github.com/LearningByExample/KotlinReactiveMS/blob/master/src/test/kotlin/org/learning/by/example/reactive/kotlin/microservices/KotlinReactiveMS/handlers/ApiHandlerTests.kt" target="_blank">Kotlin</a></p>

<figure class="highlight"><pre><code class="language-kotlin" data-lang="kotlin">  <span class="nd">@Test</span>
  <span class="k">fun</span> <span class="nf">getLocationNotFoundTest</span><span class="p">(){</span>
      <span class="p">(</span><span class="n">geoLocationService</span> <span class="n">`will</span> <span class="k">return</span><span class="err">`</span> <span class="nc">LOCATION_NOT_FOUND</span><span class="p">).</span><span class="nf">fromAddress</span><span class="p">(</span><span class="nf">any</span><span class="p">())</span>
      <span class="p">(</span><span class="n">sunriseSunsetService</span> <span class="n">`will</span> <span class="k">return</span><span class="err">`</span> <span class="nc">SUNRISE_SUNSET</span><span class="p">).</span><span class="nf">fromGeographicCoordinates</span><span class="p">(</span><span class="nf">any</span><span class="p">())</span>
      <span class="kd">val</span> <span class="py">serverRequest</span> <span class="p">=</span> <span class="n">mock</span><span class="p">&lt;</span><span class="nc">ServerRequest</span><span class="p">&gt;()</span>
      <span class="p">(</span><span class="n">serverRequest</span> <span class="n">`will</span> <span class="k">return</span><span class="err">`</span> <span class="nc">GOOGLE_ADDRESS</span><span class="p">).</span><span class="nf">pathVariable</span><span class="p">(</span><span class="nc">ADDRESS_VARIABLE</span><span class="p">)</span>

      <span class="kd">val</span> <span class="py">serverResponse</span> <span class="p">=</span> <span class="n">apiHandler</span><span class="p">.</span><span class="nf">getLocation</span><span class="p">(</span><span class="n">serverRequest</span><span class="p">).</span><span class="nf">block</span><span class="p">()</span>
      <span class="n">serverResponse</span><span class="p">.</span><span class="nf">statusCode</span><span class="p">()</span> <span class="n">`should</span> <span class="n">be`</span> <span class="nc">HttpStatus</span><span class="p">.</span><span class="nc">NOT_FOUND</span>
      <span class="kd">val</span> <span class="py">errorResponse</span> <span class="p">:</span> <span class="nc">ErrorResponse</span> <span class="p">=</span> <span class="n">serverResponse</span><span class="p">.</span><span class="nf">extractEntity</span><span class="p">()</span>
      <span class="n">errorResponse</span><span class="p">.</span><span class="n">message</span> <span class="n">`should</span> <span class="n">equal</span> <span class="n">to`</span> <span class="nc">NOT_FOUND</span>

      <span class="n">geoLocationService</span> <span class="n">reset</span> <span class="n">`mock</span> <span class="n">responses`</span>
      <span class="n">sunriseSunsetService</span> <span class="n">reset</span> <span class="n">`mock</span> <span class="n">responses`</span>
  <span class="p">}</span></code></pre></figure>

<p>In these cases the number of lines is not the key factor but the readability of the Kotlin test is great.</p>

<p><strong>Conclusions</strong></p>

<p>With a syntax that make things simpler and more readable I’ll stick with Kotlin for my personal projects for a while meanwhile I still learning Reactive Programming.</p>

    

    <div id="disqus_thread"></div>
    <script>

    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

    var disqus_config = function () {
    this.page.url = "https://juan-medina.com/2017/06/04/reactive-kotlin-vs-java/";
    this.page.identifier = "/2017/06/04/reactive-kotlin-vs-java/"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    this.page.title = "Reactive Kotlin vs Java";
    };

    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//juan-medina-com.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    

    </div>
  </section>

  <section class="profile">
    <div class="profile__card">
      <div class="profile__img">
        <figure class="absolute-bg" style="background-image: url('/assets/img/pp.jpg');"></figure>
      </div>
      <div class="profile__container">
        <p><b>About Juan Medina</b><br/> I'm just a normal geek that code all kind of stuff, from complex corporate applications to games.<br/> <br/> Games, music, movies and traveling are my escape pods.</p>
        
          <ul class="profile__social">
            
              <li><a class="fa fa-lg fa-envelope-o" href="mailto:mail@juan-medina.com"></a></li>
            
            
              <li><a class="fa fa-lg fa-address-card" href="https://juan-medina.com/cv" target="_blank"></a></li>
            
              <li><a class="fa fa-lg fa-github" href="https://github.com/juan-medina" target="_blank"></a></li>
            
              <li><a class="fa fa-lg fa-twitter" href="https://twitter.com/JuanMedinaCode" target="_blank"></a></li>
            
              <li><a class="fa fa-lg fa-stack-overflow" href="http://stackoverflow.com/users/7910403/juan-medina" target="_blank"></a></li>
            
          </ul>
        
      </div>
    </div>
  </section>

</article>


  <section class="next">
    <a class="next__link" href="/2017/05/23/why-functional-programming-kotlin/" style="background-image: url('/assets/img/kotlin.jpg');">
      <div class="next__container">
        <span>Read Next</span>
        <h2>Why we should use functional programming with Kotlin?</h2>
      </div>
    </a>
  </section>


    </main>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/rellax/1.0.0/rellax.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script>
<script type="text/javascript" src="/assets/js/app.js"></script>


  </body>

</html>
